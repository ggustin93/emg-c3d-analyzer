#!/bin/sh
# Pre-commit Quality Gates for EMG C3D Analyzer
# Ensures code quality before each commit

echo "üîç Running pre-commit quality gates..."

# 1. TypeScript type checking
echo "üìù Checking TypeScript types..."
npm run build
if [ $? -ne 0 ]; then
  echo "‚ùå TypeScript errors found. Fix them before committing."
  exit 1
fi

# 2. Run tests
echo "üß™ Running tests..."
npm test -- --run
if [ $? -ne 0 ]; then
  echo "‚ùå Tests failed. Fix them before committing."
  exit 1
fi

# 3. ESLint (if available)
if [ -f "node_modules/.bin/eslint" ]; then
  echo "üîß Running ESLint..."
  npm run lint 2>/dev/null || echo "‚ö†Ô∏è  ESLint not configured, skipping..."
fi

echo "‚úÖ All quality gates passed! Ready to commit."
